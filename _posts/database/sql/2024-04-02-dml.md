---
title: SQL - DML (Oracle DB)
date: 2024-04-02 16:00:00 +09:00
categories: [DB, sql]
tags:
  [
    Data,
    DB,
    Datebase,
    oracle,
    sql,
  ]
---

## 1. DDL이란?

### DDL의 의미

> 데이터 정의 언어(Data Definition Language)

데이터베이스 구조를 정의, 변경 및 삭제하는 데 사용

<hr>

### 주요 DDL문

CREATE
- 데이터베이스 객체를 생성
- 예를 들어 테이블, 뷰, 인덱스 등을 생성할 때 사용

ALTER
- 데이터베이스 객체를 수정
- 예를 들어 테이블에 열을 추가하거나 삭제할 때 사용

DROP
- 데이터베이스 객체를 삭제
- 예를 들어 테이블, 뷰, 인덱스 등을 삭제할 때 사용

TRUNCATE
- 테이블의 모든 데이터를 삭제
- 테이블 구조는 유지

<hr><br>

## 2. DML이란?

### DML의 의미

> 데이터 조작 언어(Data Manipulation Language)

데이터베이스의 데이터를 쿼리, 삽입, 수정, 삭제하는 작업을 수행하는 데 사용

<hr>

### 주요 DML 문

SELECT
- 데이터베이스에서 데이터를 조회
  
INSERT
- 새로운 레코드를 데이터베이스에 삽입

UPDATE
- 기존 레코드의 데이터를 수정

DELETE
- 데이터베이스에서 레코드를 삭제

<hr>

### DML문 실행이 불가능한 경우

commit & rollback 실행 안 함
- 오라클 DB는 insert, update, delete 실행 시 transaction가 실행된다.
- commit 혹은 rollbakck 하지 않으면 transaction은 종료되지 않는다.
- 이럴 경우 타 사용자는 select외의 DML 사용 불가능하다.
- 그러므로 오라클 사용 시 꼭 마지막엔 commit 혹은 rollbakck 해주도록 하자

log 파일 꽉참
- DB에 쿼리를 날리면 log파일에 기록이 저장된다.
- log 파일이 꽉차면 DML문 실행이 불가능해진다.
- 이럴 경우 log 파일 백업 후 초기화가 가능하다.

<hr>

### 기타 명령문

DQL
- 데이터 질의 언어(Data Query Language)
- `select`문이 이에 해당
  
DCL
- 데이터 제어 언어(Data Control Language)
- `grant` : 사용자에게 특정 권한을 부여
- `revoke` : 사용자에게 부여된 권한을 취소
  
TCL
- 트랜잭션 제어 언어(Transaction Control Language)
- commit : 모든 변경 사항을 영구적으로 데이터베이스에 반영하고 트랜잭션을 종료
- rollback : 모든 변경 사항을 취소하고 트랜잭션을 종료
- savepoint : 현재 트랜잭션 내에서 저장점을 설정

<hr><br>

## 3. INSERT

### 일반적인 사용법

`INSERT INTO 테이블명(컬럼명1, 컬렴명2, ..., 칼럼명n) VALUES(값1, 값2, ..., 값n)`
- `VALUES`안에 들어가는 매개변수의 타입과 개수를 컬럼에 맞게 잘 입력해야한다.

```sql
insert into temp(id, name) values(100, '홍길동');
```

<hr>

### 칼럼명 생략

칼럼명을 생략하여 사용할 수도 있다.

```sql
insert into temp values(200,'김유신');
```

하지만 가독성이 떨어지고, 에러 발생 가능성이 높기 때문에 사용은 지양

```sql
insert into temp values(200);
-- "not enough values"
insert into temp values('김유신');
-- "not enough values"
```

<hr>

### 중복 데이터

현재 `TEMP` 테이블의 생성 과정은 다음과 같다.

```sql
create table temp(
   id number primary key,
   name varchar2(20)
)

insert into temp(id, name) values(100, '홍길동');
insert into temp(id, name) values(200,'김유신');

commit;

select * from temp;

/*
ID       NAME
100	홍길동
200	김유신
*/
```

여기서 ID는 주요키(primary key)를 선언하여 null이나 중복값 할당이 불가능하다.

그럴 경우 아래와 같은 에러가 발생할 수 있다.

```sql
insert into temp(id, name) values(100, '김수한무');
-- unique constraint (KOSA.SYS_C007002) violated
```